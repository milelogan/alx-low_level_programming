More malloc and use of exit
